---
title: Recommendations API
description: Generate personalized recommendations based on user behavior
---

import { ApiBlock } from '@/components/api-block-mdx'

# Recommendations API

Generate intelligent, personalized recommendations for your users based on their behavior, interactions, and preferences. The Recommendations API uses machine learning models to analyze user patterns and suggest relevant content, products, or actions.

## Important: Server-Side Only

**The Recommendations API should only be called from your backend server**, not from client applications. This ensures your API keys remain secure and allows for server-side caching and optimization.

## Generate Recommendations

Generate personalized recommendations for a specific user:

<ApiBlock
  method="POST"
  endpoint="/ml/generate-recommendations"
  curl={`curl -X POST "https://api.norai.com/ml/generate-recommendations" \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "project_id": "your-project-id",
    "external_user_id": "user_123",
    "limit": 10
  }'`}
  nodejs={`const response = await fetch('https://api.norai.com/ml/generate-recommendations', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    project_id: 'your-project-id',
    external_user_id: 'user_123',
    limit: 10
  })
});

const recommendations = await response.json();`}
  python={`import requests

response = requests.post(
    "https://api.norai.com/ml/generate-recommendations",
    headers={
        "Authorization": "Bearer YOUR_API_KEY",
        "Content-Type": "application/json"
    },
    json={
        "project_id": "your-project-id",
        "external_user_id": "user_123",
        "limit": 10
    }
)

recommendations = response.json()`}
/>

### Example Response

```json
{
  "project_id": "your-project-id",
  "external_user_id": "user_123",
  "recommendations": [
    {
      "id": "1f0a5266-6ef9-47d7-bfad-9d5e07b136d9",
      "external_id": "prod_123",
      "score": 0.95,
      "reason": "Users with similar behavior also viewed this"
    },
    {
      "id": "5c47c704-9cfa-4457-bb63-55bd11b608c6",
      "external_id": "prod_456",
      "score": 0.87,
      "reason": "Frequently viewed together"
    },
    {
      "id": "8a21f3b5-1c2d-4e5f-9876-543210fedcba",
      "external_id": "prod_789",
      "score": 0.82,
      "reason": "Based on your recent activity"
    }
  ],
  "generated_at": "2025-12-03T10:30:00.113470Z"
}
```

## Filtered Recommendations

Filter recommendations by category, price range, or custom filters:

<ApiBlock
  method="POST"
  endpoint="/ml/generate-recommendations"
  curl={`curl -X POST "https://api.norai.com/ml/generate-recommendations" \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "project_id": "your-project-id",
    "external_user_id": "user_123",
    "limit": 10,
    "filters": {
      "category": "electronics",
      "price_range": {
        "min": 100,
        "max": 500
      }
    }
  }'`}
/>

## Batch Recommendations

Generate recommendations for multiple users at once:

<ApiBlock
  method="POST"
  endpoint="/ml/batch-recommendations"
  curl={`curl -X POST "https://api.norai.com/ml/batch-recommendations" \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "project_id": "your-project-id",
    "user_ids": ["user_1", "user_2", "user_3"],
    "limit": 10
  }'`}
  nodejs={`const response = await fetch('https://api.norai.com/ml/batch-recommendations', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    project_id: 'your-project-id',
    user_ids: ['user_1', 'user_2', 'user_3'],
    limit: 10
  })
});

const batchJob = await response.json();`}
/>

### Example Response

```json
{
  "job_id": "abc123-def456-ghi789",
  "status": "queued",
  "message": "Batch recommendation job queued. Check status at /ml/jobs/abc123-def456-ghi789"
}
```

## Check Job Status

For batch operations, check the status of your job:

<ApiBlock
  method="GET"
  endpoint="/ml/jobs/:jobId"
  curl={`curl -X GET "https://api.norai.com/ml/jobs/abc123-def456-ghi789" \\
  -H "Authorization: Bearer YOUR_API_KEY"`}
/>

### Example Response

```json
{
  "job_id": "abc123-def456-ghi789",
  "status": "completed",
  "progress": 100,
  "results_url": "/ml/jobs/abc123-def456-ghi789/results",
  "completed_at": "2025-12-03T10:35:00Z"
}
```

## Recommendation Algorithms

Norai uses multiple algorithms to generate recommendations:

- **Collaborative Filtering**: Finds users with similar behavior patterns
- **Content-Based**: Recommends items similar to what users have engaged with
- **Popularity-Based**: Ranks items by global or contextual popularity
- **Hybrid**: Combines multiple algorithms for best results

## Performance

- **Cached recommendations**: < 100ms response time
- **On-demand generation**: < 2s response time
- **Batch processing**: Async, scalable workers

## Integration Example

Here's a complete example of integrating recommendations in your backend:

```javascript
// Express.js backend
app.get('/api/recommendations/:userId', async (req, res) => {
  try {
    const response = await fetch('https://api.norai.com/ml/generate-recommendations', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.NORAI_API_KEY}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        project_id: process.env.NORAI_PROJECT_ID,
        external_user_id: req.params.userId,
        limit: 10
      })
    });
    
    const recommendations = await response.json();
    res.json(recommendations);
  } catch (error) {
    res.status(500).json({ error: 'Failed to fetch recommendations' });
  }
});
```

## Best Practices

1. **Cache recommendations**: Cache results on your server to reduce API calls
2. **Call from backend**: Never expose your API key to client applications
3. **Handle errors**: Implement fallback logic for when recommendations aren't available
4. **Personalize**: Use recommendations to enhance user experience, not replace manual curation
5. **A/B test**: Test recommendation strategies to optimize conversion rates

